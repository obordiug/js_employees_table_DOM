{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","thead","tbody","headers","querySelectorAll","forEach","th","sortDirection","conversationToNumber","value","result","split","filter","element","isNaN","Number","length","join","tableSorting","e","target","closest","contains","cellIndex","type","sortTable","rows","cells","innerHTML","sort","row1","row2","localeCompare","append","addEventListener","selectRow","tr","row","classList","remove","add","form","createElement","setAttribute","after","inputNames","map","header","countriesOffice","findIndex","input","countriesOptions","country","index","indexOf","inputName","toLowerCase","option","elements","age","attributes","salary","regexpName","regexpPosition","regexpOffice","regexpAge","regexpSalary","validateForm","regexp","test","pushNotification","posTop","posRight","title","description","div","h2","p","style","top","right","className","textContent","innerText","setTimeout","addNewEmployee","preventDefault","name","position","data","FormData","dataNewEmployee","Object","fromEntries","entries","lastElementChild","cloneNode","office","toLocaleString","reset","editingCell","td","initialValue","focus","keyboardEvent","code","blur"],"mappings":"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","file":"main.b8974302.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\nconst headers = thead.querySelectorAll('th');\n\n[ ...headers ].forEach(th => {\n  th.sortDirection = '';\n\n  return th.sortDirection;\n});\n\nconst conversationToNumber = (value) => {\n  const result = value.split('')\n    .filter(element => element !== ' ')\n    .filter(element => !isNaN(Number(element)));\n\n  if (result.length === 0) {\n    return value;\n  }\n\n  return Number(result.join(''));\n};\n\nconst tableSorting = (e) => {\n  const th = e.target.closest('th');\n\n  if (!th || !thead.contains(th)) {\n    return;\n  }\n\n  switch (headers[th.cellIndex].sortDirection) {\n    case '':\n      headers[th.cellIndex].sortDirection = 'ASC';\n      break;\n    case 'ASC':\n      headers[th.cellIndex].sortDirection = 'DESC';\n      break;\n    default:\n      headers[th.cellIndex].sortDirection = 'ASC';\n  };\n\n  const type = conversationToNumber(\n    [ ...tbody.rows ][0].cells[th.cellIndex].innerHTML);\n\n  let sortTable;\n\n  if (typeof (type) === 'string') {\n    sortTable = (headers[th.cellIndex].sortDirection === 'ASC')\n      ? [ ...tbody.rows ].sort((row1, row2) =>\n        row1.cells[th.cellIndex].innerHTML\n          .localeCompare(row2.cells[th.cellIndex].innerHTML))\n      : [ ...tbody.rows ].sort((row1, row2) =>\n        row2.cells[th.cellIndex].innerHTML\n          .localeCompare(row1.cells[th.cellIndex].innerHTML));\n  };\n\n  if (typeof (type) === 'number') {\n    sortTable = (headers[th.cellIndex].sortDirection === 'ASC')\n      ? [ ...tbody.rows ].sort((row1, row2) =>\n        conversationToNumber(row1.cells[th.cellIndex].innerHTML)\n          - conversationToNumber(row2.cells[th.cellIndex].innerHTML))\n      : [ ...tbody.rows ].sort((row1, row2) =>\n        conversationToNumber(row2.cells[th.cellIndex].innerHTML)\n          - conversationToNumber(row1.cells[th.cellIndex].innerHTML));\n  }\n  tbody.append(...sortTable);\n};\n\nthead.addEventListener('click', tableSorting);\n\nconst selectRow = (e) => {\n  const tr = e.target.closest('tr');\n\n  if (!tr || !tbody.contains(tr)) {\n    return;\n  }\n\n  [ ...tbody.rows ].forEach(row => row.classList.remove('active'));\n  tr.classList.add('active');\n};\n\ntbody.addEventListener('click', selectRow);\n\nconst form = document.createElement('form');\n\nform.classList.add('new-employee-form');\nform.setAttribute('novalidate', true);\ntable.after(form);\n\nconst inputNames = [ ...headers ].map(header => header.innerHTML);\n\nconst countriesOffice = [ ...tbody.rows ].map(row =>\n  row.cells[inputNames.findIndex(input => input === 'Office')].innerHTML);\n\nconst countriesOptions = countriesOffice.filter((country, index) =>\n  countriesOffice.indexOf(country) === index);\n\nform.innerHTML = `\n${inputNames.map(inputName =>\n    (inputName !== 'Office')\n      ? ` <label>${inputName}:\n            <input name=\"${inputName.toLowerCase()}\" type=\"text\"\n              data-qa=\"${inputName.toLowerCase()}\" required>\n          </label>`\n      : ` <label>${inputName}:\n            <select name=\"${inputName.toLowerCase()}\"\n              data-qa=\"${inputName.toLowerCase()}\">\n              ${countriesOptions.map(option => `<option value=\"${option}\">\n                ${option}\n              </option>`).join('')}\n            </select>\n          </label>`\n  ).join('')}\n  <button type=\"submit\">Save to table</button> `;\n\nform.elements.age.attributes.type.value = 'number';\nform.elements.salary.attributes.type.value = 'number';\n\nconst regexpName = /[A-Za-z]{4,}/;\nconst regexpPosition = /[A-Za-z]+/;\nconst regexpOffice\n  = /Tokyo|Singapore|London|New York|Edinburgh|San Francisco/;\nconst regexpAge\n  = /^(1[8-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]|6[0-9]|7[0-9]|8[0-9]|90)$/;\nconst regexpSalary = /[0-9]+/;\n\nconst validateForm = (regexp, value) => regexp.test(value);\n\nconst pushNotification = (posTop, posRight, title, description, type) => {\n  const div = document.createElement('div');\n  const h2 = document.createElement('h2');\n  const p = document.createElement('p');\n\n  div.classList = `notification ${type}`;\n  div.setAttribute('data-qa', 'notification');\n  form.after(div);\n  div.style.top = `${posTop}px`;\n  div.style.right = `${posRight}px`;\n  h2.className = 'title';\n  h2.textContent = title;\n  div.append(h2);\n  p.innerText = description;\n  div.append(p);\n\n  setTimeout(() => {\n    div.remove();\n  }, 2000);\n};\n\nconst addNewEmployee = (e) => {\n  e.preventDefault();\n\n  if (!validateForm(regexpName, form.elements.name.value)) {\n    pushNotification(10, 5, 'Error',\n      'Enter Name.\\n '\n  + 'Minimum allowed number of characters: 4', 'error');\n  } else if (!validateForm(regexpPosition, form.elements.position.value)) {\n    pushNotification(10, 5, 'Error',\n      'Enter Position', 'error');\n  } else if (!validateForm(regexpAge, form.elements.age.value)) {\n    pushNotification(10, 5, 'Error',\n      'Enter Age.\\n '\n  + 'The value must be less than 18 or greater than 90', 'error');\n  } else if (!validateForm(regexpSalary, form.elements.salary.value)) {\n    pushNotification(10, 5, 'Error',\n      'Enter Salary', 'error');\n  } else {\n    const data = new FormData(form);\n    const dataNewEmployee = Object.fromEntries(data.entries());\n\n    tbody.append(tbody.lastElementChild.cloneNode());\n\n    tbody.lastElementChild.innerHTML = `\n      <td>${dataNewEmployee.name}</td>\n      <td>${dataNewEmployee.position}</td>\n      <td>${dataNewEmployee.office}</td>\n      <td>${dataNewEmployee.age}</td>\n      <td>$${Number(dataNewEmployee.salary).toLocaleString('en')}</td>`;\n\n    pushNotification(10, 5, 'Success',\n      'New employee has been successfully added to the table', 'success');\n\n    form.reset();\n  }\n};\n\nform.addEventListener('submit', addNewEmployee);\n\nconst editingCell = (e) => {\n  const td = e.target.closest('td');\n\n  if (!td || !tbody.contains(td)) {\n    return;\n  }\n\n  const initialValue = td.innerHTML;\n  const input = document.createElement('input');\n\n  input.classList.add('cell-input');\n  input.value = '';\n\n  td.innerHTML = '';\n  td.append(input);\n  input.focus();\n\n  const savingChangesCell = () => {\n    switch (td.cellIndex) {\n      case 0:\n        if (validateForm(regexpName, input.value)) {\n          td.innerHTML = input.value;\n          input.remove();\n        } else {\n          td.innerHTML = initialValue;\n        }\n        break;\n\n      case 1:\n        if (validateForm(regexpPosition, input.value)) {\n          td.innerHTML = input.value;\n          input.remove();\n        } else {\n          td.innerHTML = initialValue;\n        }\n        break;\n\n      case 2:\n        if (validateForm(regexpOffice, input.value)) {\n          td.innerHTML = input.value;\n          input.remove();\n        } else {\n          td.innerHTML = initialValue;\n        }\n        break;\n\n      case 3:\n        if (validateForm(regexpAge, input.value)) {\n          td.innerHTML = input.value;\n          input.remove();\n        } else {\n          td.innerHTML = initialValue;\n        }\n        break;\n\n      case 4:\n        if (validateForm(regexpSalary, input.value)) {\n          td.innerHTML = `$${Number(input.value).toLocaleString('en')}`;\n          input.remove();\n        } else {\n          td.innerHTML = initialValue;\n        }\n        break;\n      default:\n        break;\n    }\n  };\n\n  input.addEventListener('blur', savingChangesCell);\n\n  input.addEventListener('keydown', keyboardEvent => {\n    if (keyboardEvent.code === 'Enter') {\n      keyboardEvent.target.blur();\n    }\n  });\n};\n\ntbody.addEventListener('dblclick', editingCell);\n"]}